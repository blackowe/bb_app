{% extends "base.html" %}

{% block head %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet">
    <style>
        .select2-container {
            width: 100% !important;
        }
        .rule-description {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }
    </style>
{% endblock %}

{% block content %}
    <div class="container mt-4">
    <h2>Antigen Management</h2>
        
        <!-- Antigen Management Section -->
        <div class="card mb-4">
            <div class="card-header">
                <h4>Antigen Management</h4>
            </div>
            <div class="card-body">
                <form id="antigenForm">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label for="antigenName" class="form-label">Antigen Name</label>
                                <input type="text" class="form-control" id="antigenName" name="antigenName" required>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label for="antigenSystem" class="form-label">System</label>
                                <select class="form-select" id="antigenSystem" name="antigenSystem" required>
                                    <option value="">Select System</option>
                                    <option value="Rh">Rh</option>
                                    <option value="Kell">Kell</option>
                                    <option value="Duffy">Duffy</option>
                                    <option value="Kidd">Kidd</option>
                                    <option value="MNS">MNS</option>
                                    <option value="Lewis">Lewis</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3" id="otherSystemGroup" style="display: none;">
                                <label for="otherSystem" class="form-label">Other System Name</label>
                                <input type="text" class="form-control" id="otherSystem" name="otherSystem">
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Add Antigen</button>
                </form>

                <div class="mt-4">
                    <h5>Existing Antigens</h5>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>System</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="antigensTableBody">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="mt-4">
            <div class="d-flex justify-content-between align-items-center mb-3">
            <h5>Antibody Rules Management</h5>
            <a href="/antibody_rules" class="btn btn-primary">Manage Antibody Rules</a>
                </div>
        <p class="text-muted">Antibody rules management has been moved to a dedicated page for better organization.</p>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script src="{{ url_for('static', filename='js/antigen.js') }}"></script>
{% endblock %} 